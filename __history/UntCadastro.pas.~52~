unit UntCadastro;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, DB, Grids, DBGrids, StdCtrls, Mask, DBCtrls;

type
  TfrmCadastro = class(TForm)
    btnInserir: TButton;
    btnExcluir: TButton;
    btnEditar: TButton;
    gridMorador: TDBGrid;
    ds: TDataSource;
    Panel1: TPanel;
    edNome: TEdit;
    edRG: TEdit;
    btnPesquisar: TButton;
    Label1: TLabel;
    Label2: TLabel;
    btnNovo: TButton;
    procedure btnInserirClick(Sender: TObject);
    procedure btnExcluirClick(Sender: TObject);
    procedure btnEditarClick(Sender: TObject);
    procedure btnNovoClick(Sender: TObject);
    procedure btnPesquisarClick(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmCadastro: TfrmCadastro;

implementation

uses UntDmCadastro, UntEditarMorador;

{$R *.dfm}

procedure TfrmCadastro.btnEditarClick(Sender: TObject);
begin
  frmEditar.ShowModal;
end;

procedure TfrmCadastro.btnExcluirClick(Sender: TObject);
begin
if MessageDlg('Deseja Excluir o registro?', mtConfirmation, [mbYes, mbNo], 0) = mrYes then
   begin
    gridMorador.SelectedField.DataSet.Delete;
    dmCadastro.cdsPrestador.ApplyUpdates(0);
    dmCadastro.cdsPrestador.Close;
    dmCadastro.cdsPrestador.Open;
   end;
end;

procedure TfrmCadastro.btnInserirClick(Sender: TObject);
    var
    SQL, nome, unidade, RG : String;
    codigo : Integer;
begin
  dmCadastro.cdsPrestador.Close;
  dmCadastro.cdsPrestador.Open;
  dmCadastro.cdsPrestador.Append;

//  dmCadastro.dsCadastroNM_PRESTADOR := edNome.Text;

//  dmCadastro.cdsPrestador.CreateDataSet;

 if DmCadastro.cdsPrestador.State in [dsInsert] then
  begin
//  codigo := dmCadastro.cdsPesquisaPrestadorCD_MORADOR.AsInteger + 1;
//  dmCadastro.cdsPesquisaPrestadorCD_MORADOR.AsInteger := codigo;

  dmCadastro.cdsPrestadorNM_PRESTADOR.Value := edNome.Text;
  dmCadastro.cdsPrestadorNR_RG.Value := edRG.Text;

  dmCadastro.cdsPrestador.Post;
  dmCadastro.cdsPrestador.ApplyUpdates(0);
  dmCadastro.cdsPesquisaPrestador.Close;
  dmCadastro.cdsPesquisaPrestador.Open;
  end;

//  dmCadastro.cdsPrestador.Append;

end;

procedure TfrmCadastro.btnNovoClick(Sender: TObject);
begin
  dmCadastro.SQLQuery1.Open();
  dmCadastro.SQLQuery1.Append;
end;

procedure TfrmCadastro.btnPesquisarClick(Sender: TObject);
begin
  dmCadastro.cdsPesquisaPrestador.Active;
end;

end.
