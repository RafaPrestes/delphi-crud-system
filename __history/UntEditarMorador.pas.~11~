unit UntEditarMorador;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, DB, Mask, DBCtrls;

type
  TfrmEditar = class(TForm)
    DataSource1: TDataSource;
    Button1: TButton;
    Label1: TLabel;
    DBEdit1: TDBEdit;
    Label2: TLabel;
    DBEdit2: TDBEdit;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmEditar: TfrmEditar;

implementation

uses UntDmCadastro, UntCadastro, UntPesquisar;

{$R *.dfm}

procedure TfrmEditar.Button1Click(Sender: TObject);
var codigo : Integer;
begin
    dmCadastro.cdsPesquisaPrestador.Close;
    dmCadastro.cdsPesquisaPrestador.Open;
  Form1.DBGrid1.SelectedField.DataSet.Edit;
//   if DmCadastro.cdsPrestador.State in [dsEdit] then
//  dmCadastro.cdsPrestador.Append;
//  //DataModule2.dataSet.Edit;
//  codigo := dmCadastro.cdsPrestadorCD_PRESTADOR.AsInteger;
//  dmCadastro.cdsPrestadorCD_PRESTADOR.AsInteger := codigo;
//  dmCadastro.cdsPrestadorNM_PRESTADOR.Value := frmEditar.DBEdit1.Text;
//  dmCadastro.cdsPrestadorNR_RG.Value := frmEditar.DBEdit2.Text;
//
//  dmCadastro.cdsPrestador.Post;
//  ShowMessage('Atualizado !');
//  dmCadastro.cdsPrestador.ApplyUpdates(0);


 if dmCadastro.cdsPesquisaPrestador.State in [dsEdit] then
  begin
      dmCadastro.cdsPesquisaPrestador.Append;
//      dmCadastro.cdsPesquisaPrestador.Append;
//  codigo := dmCadastro.cdsPesquisaPrestadorCD_MORADOR.AsInteger + 1;
//  dmCadastro.cdsPesquisaPrestadorCD_MORADOR.AsInteger := codigo;

  dmCadastro.cdsPesquisaPrestadorNM_PRESTADOR.Value := frmEditar.DBEdit1.Text;
  dmCadastro.cdsPesquisaPrestadorNR_RG.Value := frmEditar.DBEdit2.Text;

  dmCadastro.cdsPesquisaPrestador.Post;
  ShowMessage('Atualizado !');
  dmCadastro.cdsPesquisaPrestador.ApplyUpdates(0);
  end;

   frmEditar.Close;

    dmCadastro.cdsPesquisaPrestador.Close;
    dmCadastro.cdsPesquisaPrestador.Open;
end;

end.
